{"version":3,"sources":["webpack://Wedding/webpack/universalModuleDefinition","webpack://Wedding/webpack/bootstrap","webpack://Wedding/./src/helpers.js","webpack://Wedding/./src/events.js","webpack://Wedding/./src/emitter.js","webpack://Wedding/./src/index.js","webpack://Wedding/./main.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createConnection","url","frame","document","createElement","_extends","src","style","display","body","append","createConnectionListener","whitelist","self","addEventListener","e","includes","origin","events","data","console","error","validateConstructor","isConnecter","checkConnecter","length","checkWhitelist","statuses","disconnected","connecting","connected","this","on","startConnection","finishConnection","_helpers","emit","clearInterval","connectionInterval","status","info","Emitter","create","fn","_defineProperty","contentWindow","postMessage","parent","undefined","Wedding","_ref","_classCallCheck","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","initEvents","_this2","setInterval","_index","arguments","_ref$isConnecter","_ref$url","_ref$whitelist","WeddingConstructor"],"mappings":"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","file":"wedding.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Wedding\"] = factory();\n\telse\n\t\troot[\"Wedding\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","// Create connection function\n// creates iFrame and trying to connect inside with interval\nexport function createConnection(url) {\n  const frame = document.createElement('iframe');\n\n  Object.assign(frame, {\n    name: 'theFionce',\n    src: url,\n    style: {\n      display: 'none',\n    },\n  });\n\n  document.body.append(frame);\n  return frame;\n}\n\n// Create connection listner on window\nexport function createConnectionListener(whitelist, self) {\n  window.addEventListener('message', (e) => {\n    if (!whitelist.includes(e.origin)) {\n      console.error('Origin is not included in whitelist');\n      return;\n    }\n\n    self.events[e.data]();\n  }, false);\n}\n\n// Validations\nfunction checkConnecter(isConnecter, url) {\n  if (isConnecter && url === '') {\n    console.error('Please provide correct url for connections');\n    return false;\n  }\n\n  return true;\n}\n\nfunction checkWhitelist(whitelist) {\n  if (whitelist.length === 0) {\n    console.error('Please provide whitelist for connections');\n    return false;\n  }\n\n  return true;\n}\n\nexport function validateConstructor(isConnecter, url, whitelist) {\n  return checkConnecter(isConnecter, url) && checkWhitelist(whitelist);\n}\n\nexport const statuses = {\n  disconnected: 'disconnected',\n  connecting: 'connecting',\n  connected: 'connected',\n};\n","import { statuses } from './helpers';\n\n// Default events\nfunction startConnection() {\n  this.emit('connection:finished');\n}\n\nfunction finishConnection() {\n  clearInterval(this.connectionInterval);\n  this.status = statuses.connected;\n\n  console.info('Connection established');\n}\n\n// exported function\nexport default function initEvents() {\n  this.on('connection:start', startConnection);\n  this.on('connection:finished', finishConnection);\n}\n","class Emitter extends null {\n  events = Object.create(null);\n\n  on(name, fn) {\n    if (this.events[name]) {\n      console.error('This event listner already exists');\n      return;\n    }\n\n    this.events = Object.assign(this.events, { [name]: fn });\n  }\n\n  emit(name) {\n    if (this.isConnecter) {\n      this.frame.contentWindow.postMessage(name, this.url);\n    } else {\n      window.parent.postMessage(name, this.url);\n    }\n  }\n\n  off(name) {\n    if (!this.events[name]) {\n      console.error('This event listner doesnt exists');\n      return;\n    }\n\n    this.events = Object.assign({}, { [name]: undefined });\n  }\n}\n\nexport default Emitter;\n","import Emitter from './emitter';\nimport initEvents from './events';\nimport { createConnection, createConnectionListener, statuses } from './helpers';\n\nclass Wedding extends Emitter {\n  constructor({ isConnecter, url, whitelist }) {\n    super();\n\n    Object.assign(this, {\n      isConnecter,\n      url,\n      whitelist,\n      frame: null,\n      connectionInterval: null,\n      status: statuses.disconnected,\n    });\n\n    createConnectionListener(this.whitelist);\n    initEvents.call(this);\n  }\n\n  connect() {\n    if (this.isConnecter) {\n      console.info('Initializing connection');\n      this.frame = createConnection(this.url);\n\n      this.connectionInterval = setInterval(() => {\n        this.emit('connection:start');\n      }, 1000);\n\n      this.status = statuses.connecting;\n    } else {\n      console.error('This is not a connector');\n    }\n  }\n}\n\nexport default Wedding;\n","import WeddingConstructor from './src/index';\nimport { validateConstructor } from './src/helpers';\n\nconst Wedding = ({\n  isConnecter = false,\n  url = '',\n  whitelist = [],\n} = {}) => {\n  // Validate before construct\n  if (!validateConstructor(isConnecter, url, whitelist)) {\n    return null;\n  }\n\n  return new WeddingConstructor({ isConnecter, url, whitelist });\n};\n\nexport default Wedding;\n"],"sourceRoot":""}